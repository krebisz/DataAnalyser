<Window x:Class="DataVisualiser.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:admin="clr-namespace:DataVisualiser.UI.Admin"
        xmlns:views="clr-namespace:DataVisualiser.UI"
        Title="Health Data Viz"
        SizeToContent="Height"
        Width="1800"
        FontSize="10"
        Background="#FFD4CFCF">

    <Window.Style>
        <Style TargetType="Window">
            <Setter Property="Cursor" Value="Arrow" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=MainChartsView, Path=DataContext.IsBusy}" Value="True">
                    <Setter Property="Cursor" Value="Wait" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Style>

    <Grid>
        <TabControl TabStripPlacement="Bottom" Margin="0">
            <TabItem Header="Charts">
                <views:MainChartsView x:Name="MainChartsView" />
            </TabItem>

            <TabItem Header="Admin">
                <admin:AdminMetricsManagerView />
            </TabItem>
        </TabControl>

        <Grid x:Name="BusyOverlay"
              Visibility="{Binding ElementName=MainChartsView, Path=DataContext.IsBusy, Converter={StaticResource BoolToVisibilityConverter}}"
              Background="#66000000"
              Cursor="Wait">
            <Border Background="#FFE7E3E3" BorderBrush="#FF747171" BorderThickness="1" CornerRadius="6" Padding="16"
                    HorizontalAlignment="Center" VerticalAlignment="Center">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Viewbox Width="26" Height="36" Margin="0,0,12,0">
                        <Canvas Width="26" Height="36">
                            <Polygon Points="3,3 23,3 13,18" Fill="#FF3B3B3B" />
                            <Polygon Points="3,33 23,33 13,18" Fill="#FF3B3B3B" />
                            <Line X1="3" Y1="3" X2="3" Y2="33" Stroke="#FF3B3B3B" StrokeThickness="2" />
                            <Line X1="23" Y1="3" X2="23" Y2="33" Stroke="#FF3B3B3B" StrokeThickness="2" />
                        </Canvas>
                    </Viewbox>
                    <StackPanel>
                        <TextBlock Text="Loading..." FontWeight="SemiBold" Foreground="#FF3B3B3B" />
                        <ProgressBar Width="140" Height="8" Margin="0,6,0,0" IsIndeterminate="True" />
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>