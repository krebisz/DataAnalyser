<Window x:Class="DataVisualiser.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        Title="Health Data Viz" Height="1400" Width="1800" FontSize="10" Background="#FFD4CFCF">
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="5">
            <Label Content="Resolution:" VerticalAlignment="Center" Margin="5,0" />
            <ComboBox x:Name="ResolutionCombo" Width="120" Margin="5" IsEditable="False" SelectionChanged="OnResolutionSelectionChanged" />
            <Label Content="Metric Type:" VerticalAlignment="Center" Margin="5,0" />
            <ComboBox x:Name="TablesCombo" Width="300" Margin="5" IsEditable="False" SelectionChanged="OnMetricTypeSelectionChanged" />

            <Label Content="From:" VerticalAlignment="Center" Margin="5,0" />
            <DatePicker x:Name="FromDate" Margin="5" Width="150" />
            <Label Content="To:" VerticalAlignment="Center" Margin="5,0" />
            <DatePicker x:Name="ToDate" Margin="5" Width="150" />
            <Button Content="Load Data" Click="OnLoadData" Margin="5" Padding="10,5" />
            <Separator Margin="10,0" />
            <Button Content="Reset Zoom" Click="OnResetZoom" Margin="5" Padding="10,5" ToolTip="Reset zoom and pan to show all data" />
        </StackPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="5" Name="MetricSubtypePanel">
            <Label Content="Metric Subtype 1:" VerticalAlignment="Center" Margin="5,0" />
            <ComboBox x:Name="SubtypeCombo" Width="250" Margin="5" IsEditable="False" SelectionChanged="OnAnySubtypeSelectionChanged" IsEnabled="False" />
            <Label Content="Metric Subtype 2:" VerticalAlignment="Center" Margin="5,0" />
            <!-- <ComboBox x:Name="SubtypeCombo2" Width="250" Margin="5" IsEditable="False" SelectionChanged="OnSubtype2SelectionChanged" IsEnabled="False" Visibility="Hidden" />
            <Label Content="Metric Subtype 3:" VerticalAlignment="Center" Margin="5,0" />
            <ComboBox x:Name="SubtypeCombo3" Width="250" Margin="5" IsEditable="False" SelectionChanged="OnSubtype3SelectionChanged" IsEnabled="False" Visibility="Hidden" />
            <Label Content="Metric Subtype 4:" VerticalAlignment="Center" Margin="5,0" />
            <ComboBox x:Name="SubtypeCombo4" Width="250" Margin="5" IsEditable="False" SelectionChanged="OnSubtype4SelectionChanged" IsEnabled="False" Visibility="Hidden" />-->
            <Button Content="Add Subtype" Click="AddSubtypeComboBox" Margin="5" Padding="10,5" />
        </StackPanel>
        <!-- Charts are placed in a vertically-stacked panel inside a ScrollViewer.
             Each chart has a TextBlock title above it that will be set from code-behind.
             The ScrollViewer allows vertical scrolling when combined chart heights exceed the window. -->
        <ScrollViewer Margin="5" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Orientation="Vertical">

                <!-- ChartMain with dynamic title -->
                <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                    <TextBlock x:Name="ChartMainTitle" Text="ChartMain" FontWeight="Bold" FontSize="14" Margin="20,5,10,0" />
                    <lvc:CartesianChart x:Name="ChartMain"
                                        LegendLocation="Right"
                                        Zoom="X"
                                        Pan="X"
                                        Hoverable="True"
                                        Margin="20,5,10,20"
                                        VerticalAlignment="Top"
                                        MinHeight="500">
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Title="Time" />
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis Title="Value" ShowLabels="True" />
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>
                </StackPanel>

                <!-- Difference chart: title + chart -->
                <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                    <StackPanel Orientation="Horizontal" Margin="20,5,10,0">
                        <TextBlock x:Name="ChartDiffTitle" Text="ChartDiff" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                        <Button x:Name="ChartDiffToggleButton" Content="Show" Margin="10,0,0,0" Padding="10,3" Click="OnChartDiffToggle" />
                    </StackPanel>
                    <StackPanel x:Name="ChartDiffPanel" Orientation="Vertical">
                        <lvc:CartesianChart x:Name="ChartDiff"
                                            LegendLocation="Right"
                                            Zoom="X"
                                            Pan="X"
                                            Hoverable="True"
                                            Margin="20,5,10,20"
                                            VerticalAlignment="Top"
                                            MinHeight="400">
                            <lvc:CartesianChart.AxisX>
                                <lvc:Axis Title="Time" />
                            </lvc:CartesianChart.AxisX>
                            <lvc:CartesianChart.AxisY>
                                <lvc:Axis Title="Difference" ShowLabels="True" />
                            </lvc:CartesianChart.AxisY>
                        </lvc:CartesianChart>
                    </StackPanel>
                </StackPanel>

                <!-- Ratio chart: title + chart -->
                <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                    <StackPanel Orientation="Horizontal" Margin="20,5,10,0">
                        <TextBlock x:Name="ChartRatioTitle" Text="ChartRatio" FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                        <Button x:Name="ChartRatioToggleButton" Content="Show" Margin="10,0,0,0" Padding="10,3" Click="OnChartRatioToggle" />
                    </StackPanel>
                    <StackPanel x:Name="ChartRatioPanel" Orientation="Vertical">
                        <lvc:CartesianChart x:Name="ChartRatio"
                                            LegendLocation="Right"
                                            Zoom="X"
                                            Pan="X"
                                            Hoverable="True"
                                            Margin="20,5,10,20"
                                            VerticalAlignment="Top"
                                            MinHeight="400">
                            <lvc:CartesianChart.AxisX>
                                <lvc:Axis Title="Time" />
                            </lvc:CartesianChart.AxisX>
                            <lvc:CartesianChart.AxisY>
                                <lvc:Axis Title="Ratio" ShowLabels="True" />
                            </lvc:CartesianChart.AxisY>
                        </lvc:CartesianChart>
                    </StackPanel>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</Window>