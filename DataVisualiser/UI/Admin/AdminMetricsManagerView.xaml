<UserControl x:Class="DataVisualiser.UI.Admin.AdminMetricsManagerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:DataVisualiser.UI.Converters"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <converters:MultiplyConverter x:Key="MultiplyConverter" />
    </UserControl.Resources>

    <Grid x:Name="RootGrid" Margin="10,10,10,30">
        <StackPanel x:Name="MetricsAndSubmetricsPanel" Orientation="Vertical">
            <GroupBox Header="Metrics &amp; SubMetrics" Margin="0,0,0,10">
                <StackPanel Margin="10">
                    <Border Background="#FF747171" Padding="8" CornerRadius="4">
                        <DockPanel LastChildFill="False">
                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                                <TextBlock Text="Metric Type:" Foreground="White" VerticalAlignment="Center" Margin="0,0,6,0" />
                                <ComboBox x:Name="MetricTypeCombo"
                                          Width="320"
                                          IsEditable="False"
                                          SelectionChanged="OnMetricTypeSelectionChanged" />
                            </StackPanel>

                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                            <CheckBox x:Name="HideDisabledCheckBox"
                                      Content="Hide disabled"
                                      Foreground="White"
                                      VerticalAlignment="Center"
                                      Margin="0,0,10,0"
                                      Checked="OnHideDisabledToggled"
                                      Unchecked="OnHideDisabledToggled" />
                            <TextBlock x:Name="FilterStatusText"
                                       Text="Updating list..."
                                       Foreground="White"
                                       VerticalAlignment="Center"
                                       Margin="0,0,10,0"
                                       Visibility="Collapsed" />
                            <Button x:Name="ReloadButton"
                                    Content="Reload"
                                    Margin="6,0,0,0"
                                    Padding="10,4"
                                    Click="OnReloadClicked" />
                                <Button x:Name="SaveButton"
                                        Content="Save"
                                        Margin="6,0,0,0"
                                        Padding="10,4"
                                        IsEnabled="False"
                                        Click="OnSaveClicked" />
                            </StackPanel>
                        </DockPanel>
                    </Border>

                    <DataGrid x:Name="CountsGrid"
                              Margin="0,10,0,0"
                              Width="{Binding ActualWidth, ElementName=RootGrid, Converter={StaticResource MultiplyConverter}, ConverterParameter=0.7}"
                              MaxHeight="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource MultiplyConverter}, ConverterParameter=0.7}"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Top"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.HorizontalScrollBarVisibility="Auto"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="False"
                              SelectionUnit="FullRow"
                              HeadersVisibility="Column"
                              GridLinesVisibility="Horizontal"
                              AlternatingRowBackground="#FFEDEDED">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="MetricType" Binding="{Binding MetricType}" IsReadOnly="True" Width="200" />
                            <DataGridTextColumn Header="MetricSubtype" Binding="{Binding MetricSubtype}" IsReadOnly="True" Width="220" />
                            <DataGridTextColumn Header="MetricTypeName" Binding="{Binding MetricTypeName, UpdateSourceTrigger=PropertyChanged}" Width="220" />
                            <DataGridTextColumn Header="MetricSubtypeName" Binding="{Binding MetricSubtypeName, UpdateSourceTrigger=PropertyChanged}" Width="240" />
                            <DataGridCheckBoxColumn Header="Disabled" Binding="{Binding Disabled, UpdateSourceTrigger=PropertyChanged}" Width="80" />
                            <DataGridTextColumn Header="Count" Binding="{Binding RecordCount}" IsReadOnly="True" Width="90" />
                            <DataGridTextColumn Header="MostRecent" Binding="{Binding MostRecentDateTime}" IsReadOnly="True" Width="160" />
                        </DataGrid.Columns>
                    </DataGrid>

                    <TextBlock x:Name="StatusText"
                               Margin="2,8,2,0"
                               Foreground="#FF3B3B3B" />
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </Grid>
</UserControl>
